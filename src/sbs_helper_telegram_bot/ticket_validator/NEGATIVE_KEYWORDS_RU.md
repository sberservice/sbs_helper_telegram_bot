# –§—É–Ω–∫—Ü–∏—è –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤

## –û–±–∑–æ—Ä

–í–∞–ª–∏–¥–∞—Ç–æ—Ä –∑–∞—è–≤–æ–∫ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞**, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–Ω–∏–∂–∞—é—Ç –æ—Ü–µ–Ω–∫—É –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ç–∏–ø–∞ –∑–∞—è–≤–∫–∏. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∑–∞—è–≤–∫–∏, —à—Ç—Ä–∞—Ñ—É—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ —Å–ª–æ–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–∏–ø–æ–º –∑–∞—è–≤–∫–∏.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å –º–∏–Ω—É—Å (`-`) –∫ –∫–ª—é—á–µ–≤–æ–º—É —Å–ª–æ–≤—É, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º.

**–ü—Ä–∏–º–µ—Ä:**
```json
["—É—Å—Ç–∞–Ω–æ–≤–∫–∞", "–º–æ–Ω—Ç–∞–∂", "-—Ä–µ–º–æ–Ω—Ç"]
```

–í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ:
- `—É—Å—Ç–∞–Ω–æ–≤–∫–∞` –∏ `–º–æ–Ω—Ç–∞–∂` - –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–¥–æ–±–∞–≤–ª—è—é—Ç –∫ –æ—Ü–µ–Ω–∫–µ)
- `-—Ä–µ–º–æ–Ω—Ç` - –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (–≤—ã—á–∏—Ç–∞–µ—Ç –∏–∑ –æ—Ü–µ–Ω–∫–∏)

### –õ–æ–≥–∏–∫–∞ –ø–æ–¥—Å—á–µ—Ç–∞ –æ—á–∫–æ–≤

–ü—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ç–∏–ø–æ–≤ –∑–∞—è–≤–æ–∫:
- –ö–∞–∂–¥–æ–µ **–ø–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ**, –Ω–∞–π–¥–µ–Ω–Ω–æ–µ –≤ —Ç–µ–∫—Å—Ç–µ, –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –æ—Ü–µ–Ω–∫–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é +1 –∑–∞ –∫–∞–∂–¥–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ)
- –ö–∞–∂–¥–æ–µ **–Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ**, –Ω–∞–π–¥–µ–Ω–Ω–æ–µ –≤ —Ç–µ–∫—Å—Ç–µ, –≤—ã—á–∏—Ç–∞–µ—Ç –∏–∑ –æ—Ü–µ–Ω–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -1 –∑–∞ –∫–∞–∂–¥–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ)
- –í—ã–±–∏—Ä–∞–µ—Ç—Å—è —Ç–∏–ø –∑–∞—è–≤–∫–∏ —Å –Ω–∞–∏–≤—ã—Å—à–µ–π –æ–±—â–µ–π –æ—Ü–µ–Ω–∫–æ–π

### –ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è

**–¢–∏–ø—ã –∑–∞—è–≤–æ–∫:**
```json
{
  "id": 1,
  "type_name": "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è",
  "detection_keywords": ["—É—Å—Ç–∞–Ω–æ–≤–∫–∞", "–º–æ–Ω—Ç–∞–∂", "-—Ä–µ–º–æ–Ω—Ç", "-–∑–∞–º–µ–Ω–∞"]
}
{
  "id": 2,
  "type_name": "–†–µ–º–æ–Ω—Ç –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è",
  "detection_keywords": ["—Ä–µ–º–æ–Ω—Ç", "–ø–æ–ª–æ–º–∫–∞"]
}
```

**–¢–µ–∫—Å—Ç –∑–∞—è–≤–∫–∏:** "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –∞ –Ω–µ —Ä–µ–º–æ–Ω—Ç"

**–†–∞—Å—á–µ—Ç –æ—Ü–µ–Ω–∫–∏:**
- –¢–∏–ø 1 (–£—Å—Ç–∞–Ω–æ–≤–∫–∞): `—É—Å—Ç–∞–Ω–æ–≤–∫–∞` (+1) + `-—Ä–µ–º–æ–Ω—Ç` (-1) = **0**
- –¢–∏–ø 2 (–†–µ–º–æ–Ω—Ç): `—Ä–µ–º–æ–Ω—Ç` (+1) = **1**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –¢–∏–ø 2 (–†–µ–º–æ–Ω—Ç), –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–µ–≥–æ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è –æ—Ü–µ–Ω–∫–∞.

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–µ—Å–∞

–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –≤–µ—Å–∞–º–∏:

```python
keyword_weights = {
    "-—Ä–µ–º–æ–Ω—Ç": 2.0  # –ù–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ —Å —É–¥–≤–æ–µ–Ω–Ω—ã–º –≤–µ—Å–æ–º
}
```

–≠—Ç–æ –¥–∞—Å—Ç `-—Ä–µ–º–æ–Ω—Ç` –æ—Ü–µ–Ω–∫—É **-2.0** –≤–º–µ—Å—Ç–æ **-1.0** –ø—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏.

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ—Ö–æ–∂–∏—Ö —Ç–∏–ø–æ–≤

–ï—Å–ª–∏ –¥–≤–∞ —Ç–∏–ø–∞ –∑–∞—è–≤–æ–∫ –∏–º–µ—é—Ç –æ–±—â–∏–µ —Å–ª–æ–≤–∞, –Ω–æ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ü–µ–ª–∏:

```json
// –ù–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
["—É—Å—Ç–∞–Ω–æ–≤–∫–∞", "–Ω–æ–≤–æ–µ", "-–∑–∞–º–µ–Ω–∞", "-–ø–µ—Ä–µ–Ω–æ—Å"]

// –ó–∞–º–µ–Ω–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è  
["–∑–∞–º–µ–Ω–∞", "–∑–∞–º–µ–Ω–∏—Ç—å", "-—É—Å—Ç–∞–Ω–æ–≤–∫–∞"]

// –ü–µ—Ä–µ–Ω–æ—Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
["–ø–µ—Ä–µ–Ω–æ—Å", "–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å", "-—É—Å—Ç–∞–Ω–æ–≤–∫–∞"]
```

### 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–±—â–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤

–ï—Å–ª–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö, –Ω–æ –¥–æ–ª–∂–Ω–æ –∏—Å–∫–ª—é—á–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –∑–∞—è–≤–æ–∫:

```json
// –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
["–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ", "–ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞", "-–ø–æ–ª–æ–º–∫–∞", "-—Ä–µ–º–æ–Ω—Ç"]

// –†–µ–º–æ–Ω—Ç
["—Ä–µ–º–æ–Ω—Ç", "–ø–æ–ª–æ–º–∫–∞", "-–ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞"]
```

### 3. –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤:

```json
// –í—ã–µ–∑–¥ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
["–≤—ã–µ–∑–¥", "–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞", "-—É–¥–∞–ª–µ–Ω–Ω–æ", "-–¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ"]
```

## –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

–ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–æ–º –∂–µ JSON –º–∞—Å—Å–∏–≤–µ, —á—Ç–æ –∏ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ —Å—Ç–æ–ª–±—Ü–µ `detection_keywords`:

```sql
UPDATE ticket_validator_ticket_types 
SET detection_keywords = '["—É—Å—Ç–∞–Ω–æ–≤–∫–∞", "–º–æ–Ω—Ç–∞–∂", "-—Ä–µ–º–æ–Ω—Ç", "-–∑–∞–º–µ–Ω–∞"]'
WHERE id = 1;
```

## –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ –æ—Ç–ª–∞–¥–∫–∏ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏:

### –í—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å
```
SCORES BY TICKET TYPE:
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (Score: -1.0)
   Keywords matched: 1/4 (25.0%)
   Matched keywords:
     + '—É—Å—Ç–∞–Ω–æ–≤–∫–∞': found 1x (weight: 1.0, score: 1.0)
     - '—Ä–µ–º–æ–Ω—Ç': found 1x (weight: 1.0, score: -1.0)
```

–ü—Ä–µ—Ñ–∏–∫—Å `+` —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, –∞ –ø—Ä–µ—Ñ–∏–∫—Å `-` - –Ω–∞ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞.

### –û—Ç–ª–∞–¥–æ—á–Ω—ã–π –≤—ã–≤–æ–¥ Telegram –±–æ—Ç–∞

–ö–æ–≥–¥–∞ —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏ –≤–∫–ª—é—á–µ–Ω –≤ Telegram –±–æ—Ç–µ, –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —é–Ω–∏–∫–æ–¥-—Å–∏–º–≤–æ–ª–∞–º–∏:
- **‚äï** - –ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –æ—Ü–µ–Ω–∫—É)
- **‚äñ** - –ù–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (—É–º–µ–Ω—å—à–∞–µ—Ç –æ—Ü–µ–Ω–∫—É)

–ü—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è Telegram:
```
üîç DEBUG: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∑–∞—è–≤–∫–∏

‚úÖ –û–ø—Ä–µ–¥–µ–ª—ë–Ω —Ç–∏–ø: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
üìä –û—Ü–µ–Ω–µ–Ω–æ —Ç–∏–ø–æ–≤: 2

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ç–∏–ø–∞–º:

üìã –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è
   –°—á—ë—Ç: 1.0
   –°–æ–≤–ø–∞–ª–æ: 2/4 (50.0%)
   –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:
     ‚äï '—É—Å—Ç–∞–Ω–æ–≤–∫–∞': 1x (–≤–µ—Å: 1.0, —Å—á—ë—Ç: 1.0)
     ‚äï '–º–æ–Ω—Ç–∞–∂': 1x (–≤–µ—Å: 1.0, —Å—á—ë—Ç: 1.0)
     ‚äñ '—Ä–µ–º–æ–Ω—Ç': 1x (–≤–µ—Å: 1.0, —Å—á—ë—Ç: -1.0)
```

–í—Å–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã (–≤–∫–ª—é—á–∞—è –∑–Ω–∞–∫–∏ –º–∏–Ω—É—Å –≤ –æ—Ü–µ–Ω–∫–∞—Ö) –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∞ MarkdownV2 Telegram –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞.

## –°–ø—Ä–∞–≤–∫–∞ –ø–æ API

### –ö–ª–∞—Å—Å KeywordMatch

```python
@dataclass
class KeywordMatch:
    keyword: str          # –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ (–±–µ–∑ –∑–Ω–∞–∫–∞ –º–∏–Ω—É—Å)
    count: int           # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑, –Ω–∞–π–¥–µ–Ω–Ω–æ–µ –≤ —Ç–µ–∫—Å—Ç–µ
    weight: float = 1.0  # –ú–Ω–æ–∂–∏—Ç–µ–ª—å –≤–µ—Å–∞
    is_negative: bool = False  # –Ø–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–º –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º
    
    @property
    def weighted_score(self) -> float:
        # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ is_negative=True
        score = self.count * self.weight
        return -score if self.is_negative else score
```

### –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

```python
def detect_ticket_type(
    ticket_text: str, 
    ticket_types: List[TicketType],
    debug: bool = False,
    keyword_weights: Optional[Dict[str, float]] = None
) -> tuple[Optional[TicketType], Optional[DetectionDebugInfo]]:
    """
    –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –∑–∞—è–≤–∫–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤.
    
    –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (—Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º -) –ø–æ–Ω–∏–∑—è—Ç –æ—Ü–µ–Ω–∫—É.
    """
```

## –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ç–∏–ø–∞–º –∑–∞—è–≤–æ–∫:

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
UPDATE ticket_validator_ticket_types 
SET detection_keywords = JSON_ARRAY_APPEND(
    detection_keywords, 
    '$', 
    '-–Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–µ_—Å–ª–æ–≤–æ'
)
WHERE type_name = '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è';
```

–ò–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –≤–µ—Å—å –º–∞—Å—Å–∏–≤ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤:

```sql
UPDATE ticket_validator_ticket_types 
SET detection_keywords = '["–∫–ª—é—á–µ–≤–æ–µ", "—Å–ª–æ–≤–æ", "-–∏—Å–∫–ª—é—á–µ–Ω–∏–µ"]'
WHERE type_name = '–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è';
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–§—É–Ω–∫—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã –≤ [test_ticket_validator.py](../../../tests/test_ticket_validator.py):

- `test_negative_keywords_lower_score` - –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- `test_negative_keywords_with_weights` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–µ—Å–∞ –¥–ª—è –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
- `test_negative_keywords_debug_info` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–ª–∞–¥–æ—á–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
- `test_negative_keywords_not_counted_in_matched` - –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–¥—Å—á–µ—Ç–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- `test_multiple_negative_keywords` - –ù–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –Ω–∞ —Ç–∏–ø

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–º–æ—â—å—é:
```bash
python -m pytest tests/test_ticket_validator.py::TestTicketTypeDetection -v
```
